# 3.1 保守・運用

サービス・プロダクトを安定的に価値提供するために、予め計画された保守・運用を行うことは絶対的に必須な事項である。それに加え、計画の範囲内で定めたことは将来のある程度の予見でしかなく、時々刻々として変化する情勢下において定めた計画内の行動を適切に見直していく必要がある。

本章では、一般的に定める計画における課題に加え、サービス・プロダクトの改善に係る課題を抽出し、それらを解決するためにどのような取り組みがあるかを後述する。

## 目次

- [3.1 保守・運用](#31-保守運用)
  - [目次](#目次)
  - [1. 保守・運用計画の一般的な策定手順](#1-保守運用計画の一般的な策定手順)
  - [2. 保守・運用計画における課題](#2-保守運用計画における課題)
    - [課題1：人為的操作ミスによる障害](#課題1人為的操作ミスによる障害)
      - [＜解決方針＞](#解決方針)
    - [課題2：障害影響範囲の見誤りによる回復遅延](#課題2障害影響範囲の見誤りによる回復遅延)
      - [＜解決方針＞](#解決方針-1)
    - [課題3：システムリソースの状況把握不足](#課題3システムリソースの状況把握不足)
      - [＜解決方針＞](#解決方針-2)
    - [課題4：ワーストケース発生時のインシデントレスポンス](#課題4ワーストケース発生時のインシデントレスポンス)
      - [＜解決方針＞](#解決方針-3)
    - [課題5：改善事項の効率的・効果的な収集](#課題5改善事項の効率的効果的な収集)
      - [＜解決方針＞](#解決方針-4)
    - [課題6：ヘルプデスクにおける問合せ事項の活用](#課題6ヘルプデスクにおける問合せ事項の活用)
      - [＜解決方針＞](#解決方針-5)
      - [＜ベストプラクティス＞](#ベストプラクティス)
    - [課題7：継続的なセキュリティ対策の有効性確認](#課題7継続的なセキュリティ対策の有効性確認)
      - [＜解決方針＞](#解決方針-6)
      - [＜ベストプラクティス＞](#ベストプラクティス-1)
    - [課題8：コスト最適化に関するモニタリングとシステムリビルド](#課題8コスト最適化に関するモニタリングとシステムリビルド)
      - [＜解決方針＞](#解決方針-7)
  
---

## 1. 保守・運用計画の一般的な策定手順

サービス・プロダクトを安定的に提供するための保守・運用計画として、一般的には以下のような項目に対する計画を立案し、実行する。


| 章タイトル           | 記載内容           |
| -------------- | ------------------------------------ |
| 1章  運用概要    | システム構成、サービス提供時間、運用保守体制、レイヤー別役割分担を記載 |
| 2章  運用計画詳細 | レイヤー別役割（L7:サービスデリバリ、L6:サービスサポート、L5:業務運用代行、L4:アプリケーション運用保守、L3:基盤運用保守、L2:オペレーション、L1:ファシリティ管理）ごとに計画を記載    |
| 3章 コミュニケーション管理 | 報告内容、報告様式、会議体を記載   |
| 4章 ドキュメント管理 | ドキュメントに関する管理対象、管理方法を記載   |
| 5章 障害管理   | インシデント分類、レベル判定方法、報告ルートを記載   |

上記については、サービス・プロダクトの社会的影響レベル（[IPA 非機能要求グレード・モデルシステムシート参照](https://www.ipa.go.jp/sec/softwareengineering/std/ent03-b.html#section6)）に対して、サービス・プロダクトの特性によらず概ね同等の内容の計画がなされる。そのため、保守運用スキームの統一かができるよう、計画書自体の標準化が必要である。

これらの計画立案をするにあたり、サービスレベルの維持という視点に加え、継続的なサービス・プロダクトのサービスレベル向上を念頭に、業務においては要求の吸い上げ・深掘りを、システム基盤においては定量的根拠に基づく利用状況の可視化を標準記載内容とすることが好ましい。

一方、サービス・プロダクトの開発・構築に携わったプロジェクト体制により課題が潜在することから、以下課題に対し、強弱をつけた計画立案・実行が必要となるため、自組織に合わせてテーラリング（手直し）する。


## 2. 保守・運用計画における課題

### 課題1：人為的操作ミスによる障害

システム運用において人間系による操作が含まれる場合、誤操作によるミスが発生し、障害が発生することがある。人間系の操作でのミスは限られたリソース・期間では避けられないものであり、解決策もハイスキル要員によるダブルチェックなど、コスト増の要因となってしまう。また、体制増強しても一定の期間を確保することは必然となり、スピード感の阻害要因となる。よって、当該リスクは受容する傾向が高くなってしまう。

#### ＜解決方針＞

- 設計段階から、徹底的に人間系のシステム運用を排除することを第一理念とする。
- 検討不足など、システム導入段階で人間系によるシステム運用が残ってしまう場合でも、早急に自動化の検討を行うこととする。
- また、仮に人間系によるシステム運用が残ってしまう場合においても、予め設計段階でサーキットブレーカー等、フォールトトレラントなシステム実装方式を採用することで、サービス継続性の確保を行うことができるため、非機能要件検討段階から十分に組み込みを行っておくこととする。

### 課題2：障害影響範囲の見誤りによる回復遅延

障害発生時のインシデントレベル判定が不十分であり、影響範囲の見極め誤りが発生することで、適切なサービス回復活動を行うことができなくなる可能性がある。

#### ＜解決方針＞

- 予兆を含めて障害範囲の閾値判定が可能とする監視システムを構築する。
- 閾値判定には、各コンポーネントの相関付けが必然であり、それぞれで警告レベル（warn）や危険レベル（critical）の閾値を設定し、予兆や影響範囲の取りこぼしがないよう、監視システムを構成する必要がある。
- また、これらの監視システムを複数構築することはコスト増の要因となるため、関連サービス・プロダクトを包括的に監視することを目指す必要がある。

### 課題3：システムリソースの状況把握不足

- システム運用を継続すると想定以上にリソースを消費し、割り当てられたCPU/メモリ/ディスク容量が逼迫することが発生することがある。
- 当該事象を回避するために過剰なリソース割当を行うことがあるが、無駄なコストを投じたうえで目を逸らしているだけであり、システム運用の放棄と言わざるを得ない。

#### ＜解決方針＞

- CPU/メモリに関しては、増減の因果関係（アクセス件数等）を特定し、CPU/メモリの使用状況とを2軸で重ね合わせて可視化し、状態把握が常にできるようにすることが必要である。
- ディスク容量に関しては、データベースに蓄積するデータのみならず、ログにも目を向けて、保管に係る要件を定めることが必要である。
- 適切な保管期間を定め、必要性が下がってきた段階でアーカイブすることや、不要となったタイミングで削除することを設計として組み込み、自動的に処理されるようにしておく必要がある。

### 課題4：ワーストケース発生時のインシデントレスポンス

- システムに潜在する問題を回避する保守運用は必然ではあるが、そもそも問題を表面化させ、根本的な解決を行うべきことに注力すべきである。
- そのためにも、ワーストケース（単なるサーバダウンではない）が発生した場合のサービス・プロダクトの挙動を抑えるとともに、ワーストケース発生時の対処によるサービス回復性を常々高めておく必要がある。
- これらの対応を強化することで、体制の世代交代においても安定運用を獲得することが可能となる。

#### ＜解決方針＞

- 根本的に非機能要件定義や設計において、Design for Failureの考えをもって取り組む必要がある。
障害発生を前提として、如何に耐障害性を備えるかが重要であり、そのために非機能要求グレードを用いたシステムの重要度評価やインフラ構成を行い、単一障害点を排除したシステムを設計し、実現していくことが最重要である。
- さらに、実験的環境におけるカオスエンジニアリングにより、潜在的な問題の表面化させ、フォールトトレラントな挙動が確保されていることを確認し、サービス継続性を検証する。
- また、ワーストケース発生時のインシデントレスポンスを訓練することにより、人間系でのサービス回復性を高めておく。

### 課題5：改善事項の効率的・効果的な収集

人間系による改善事項の収集では一部の偏った意見が強く反映される可能性が高く、広く改善効果が浸透しづらいケースが発生する可能性がある。
また、改善事項の収集においても多大な労力が発生し、効率的・効果的な改善作業へ直結させることが非常に難しい課題がある。

#### ＜解決方針＞

- A/Bテストにより利用者の挙動を把握し、利便性におけるボトルネックを収集する。 \
※「A/Bテスト」の進め方は、3.3.3「2-4. 実験的な仮説検証サイクルを繰り返す」を参照。
- 利用者の導線に関する分析により、UIの定期的な見直しを行う。

### 課題6：ヘルプデスクにおける問合せ事項の活用

利用者からの問合せはサービス・プロダクトに対する重要な改善のきっかけとなるものである。しかし、問合せの応対においてはヘルプデスクにおける人間系の対応が必要であり、単一的な対応に留まり改善に生かすことができていない状況が往々にして発生している。

#### ＜解決方針＞

- 人間系のヘルプデスクをチャットボットにより効率化するとともに、機械判読可能な問合せ事項の収集を行う。
- さらに、問合せ事項をテキストマイニングによる類型化を行い、問合せ傾向の分析を行うことでFAQ化が可能であり、ヘルプデスク対応の効率化にも寄与させる。
- また、問合せ傾向の分析により改善事項を可視化することで、サービス・プロダクトにおける利用者のニーズを把握することが可能となる。


#### ＜ベストプラクティス＞

- GビズIDでのチャットボット活用事例

    法人・個人事業主向けの認証システム「[GビズID」](https://gbiz-id.go.jp/)では、人間によるヘルプデスク運用を行っていた。１日500件程度の電話問合せに十数名で対応しており順調だった。
    ところが近年の行政手続デジタル化の加速や、新型コロナに関連する補助金の急増に伴い、ヘルプデスクへの問合せが殺到。問合せは数倍となり、応答率が50%以下と著しく悪化した。しかし [開発章の単年度事業の課題](https://github.com/meti-dx-team/METI-Digital-Service-Playbook/blob/main/2.2%20%E9%96%8B%E7%99%BA.md#1-1-%E5%8D%98%E5%B9%B4%E5%BA%A6%E4%BA%8B%E6%A5%AD%E3%81%AE%E8%AA%B2%E9%A1%8C)でも述べられた通り、政府予算は前年度にその額が原則決められており、費用を追加投入して人員増強するという対策が即時できなかった。
    そこで、別プロダクトと共用可能なチャットボットSaaSの導入に踏み切った。当初の目的はヘルプデスクへのコールを少しでも減らすことだったが、ユーザーが入力した実際の質問を分析してみると、いま提供しているサイトでの説明では申請方法が全く理解されていないことや、意外にもGビズIDではなく、その先の行政サービスに関する質問が多いこと等がわかった。この結果を元に、サイトのコンテンツ改善やチャットボットへの追加QA投入など、問合せ低減のための改善サイクルが迅速に回せるようになった。

    チャットボットは、単なるヘルプデスクのコール低減だけでなく、**根本的に解決すべき利用者課題の把握と改善**に役立つツールとして大きく貢献している。


### 課題7：継続的なセキュリティ対策の有効性確認

セキュリティによる脅威は非常に速いスピードで巧妙化し、セキュリティ対策の有効性が損なわれるリスクが日々高まっていく。
そのため、継続的にセキュリティ対策の有効性を確認する必要があるが、脆弱性診断には専門的なノウハウを有するため、診断サービスの調達などのリードタイムを要してしまい、セキュリティリスクへ追随していくことが難しい。

#### ＜解決方針＞

- システムが⽇々脆弱性のない環境を作り上げ、対処し続けることをサイバーハイジーンと呼ぶ。
- 脆弱性のない環境の構築と維持には 保有している資産情報、公開される脆弱性情報の定常的な収集とそれらの突き合わせによる組織内における脆弱性の保有状況の可視化、パッチやアップデートの配信および適⽤状況をモニタリングする機構が必要となる。
- 保有している資産情報には運用中のシステム（サーバ、ネットワークなど）だけでなく、システム保守用端末などクライアントPC、ネットワーク、IDなどが含まれ、ツールを用いて自動的に情報収集できるように整備することが望ましい。
- 脆弱性の情報も各ベンダーから公開されており、特に影響が⼤きいものについては、JPCERT/CC や IPA などの団体から公開される。より詳細でタイムリーな情報は脅威インテリジェンスサービスから⼊⼿も可能となっている。これらの情報も旧来は人手で収集していたが、収集・突き合わせ・分析を自動化することで継続的な脅威への対応を現実的なものとすることができる。

#### ＜ベストプラクティス＞

- 脆弱性対策の効率的な進め方に関してはIPAが公表している[「脆弱性対策の効果的な進め方（ツール活用編）」](https://www.ipa.go.jp/topic/isec-technicalwatch-201902.html)が詳しく、脆弱性検知ツールVulsについて解説している。
- クライアントPCを中心とした、モダンかつセキュアな業務インフラの構築については、当室で行った[「DXオフィス関連プロジェクト管理業務等の効率化に関するデジタルツールの導入実証・調査事業に関する報告書」](https://github.com/meti-dx-team/METI-Digital-Tools/blob/main/%E4%BB%A4%E5%92%8C%EF%BC%92%E5%B9%B4%E5%BA%A6%E7%B5%8C%E6%B8%88%E7%94%A3%E6%A5%AD%E7%9C%81%E3%83%87%E3%82%B8%E3%82%BF%E3%83%AB%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E6%A7%8B%E7%AF%89%E4%BA%8B%E6%A5%AD%E5%A0%B1%E5%91%8A%E6%9B%B8.pdf)が参考になる。

### 課題8：コスト最適化に関するモニタリングとシステムリビルド

パブリッククラウドの採用が進んでいることにより従量課金でのコスト最適化は一時的な恩恵として受けられるが、近い将来に停滞していくことが予想される。これは、設計段階におけるリソース柔軟性を軽視し、モノリシックなシステム構造を実装してしまうためである。
この状況を打破するためにも、繁忙期・閑散期のような季節性や、ピーク時の所要リソース等をデジタルにモニタリングし、システム構造の改善に直結するような積極的なシステムリビルドを行っていく必要がある。

#### ＜解決方針＞

- 非機能要件定義の際、リソース柔軟性を念頭に適切な情報システム実装方式を立案する。
- 保守運用下においては、パブリッククラウドで提供される改善提案を、積極的に採用する保守運用計画とする。
- 加えて、アロケートされたリソースの妥当性をモニタリングにより評価し、需要予測を行うことで、リソースの柔軟な割り当てを行う。
- これらのモニタリングにおいては、非機能要件に照らし合わし、設計段階からモニタリングを意識した情報収集方法を具備しておく必要がある。
- 保守運用を通じて、システムリビルドを念頭に非機能要件の定期的な見直しを行い、持続可能なコスト最適化活動を行う。
